# chair-passer

# Постановка задачи: 
необходимо по изображению сделать вывод о пролезании стула в дверной проём.

# Запуск
win cmd line:
python lab.py

# Вход
изображение, содержащее два целевых объекта — стул и дверной проём. Стул должен быть зелёного цвета.

# Выход
0 — стул проходит в дверной проём;
1 — стул не проходит в дверной проём;
2 — фото не удовлетворяет требованиям и/или не удалось выбрать между 0 и 1.
 
# Требования ко входу
- Изображение должно являться фотографией, сделанной камерой с разрешением как минимум 13 Мп, при достаточном освещении.
- Фотография должна содержать как минимум стул и как минимум дверной проём.
- Стул должен быть зелёного цвета
- Стул должен располагаться на фотографии на удалении как минимум 200 пикселей от правого и левого края изображения.
- Изображение может содержать объекты, перекрывающие стул, если это не влияет на видимость крайних левых и правых точек стула.
- Изображение может содержать объекты, перекрывающие дверной проём (в т.ч. это может быть стул), если объект не перекрывает значительную часть проёма.
На фотографии обязательно должна присутствовать левая и правая границы дверного проёма.
- Стул может находиться в дверном проёме, стоять рядом с дверным проёмом, стоять перед дверным проёмом.
- Центр (по оси X) изображения должен располагаться внутри дверного проёма.
- Самая отдалённая от плоскости дверного проёма точка стула должна находиться не дальше 40 см от плоскости дверного проёма, так как учёт перспективы не поддерживается в текущей версии.
- Стул должен целиком находиться на изображении.
- Плоскость дверного проёма должна быть перпендикулярна вектору взгляда камеры, в противном случае ширина дверного проёма будет вычислена без учёта ракурса съёмки и адекватность результата не гарантируется.
- На фотографии дверной проём должен быть изображён вертикально.
- Изображение не следует дополнительно обрабатывать, если это приводит к ухудшению качества распознавания целевых объектов.
- дверной проём должен быть тёмного цвета.
 
# Дополнительные ограничения обработки изображения
Вывод о прохождении стула в дверной проём делается без учёта возможности изменения ориентации стула в пространстве.
Перспектива не учитывается.
Ракурс не учитывается.
Стулья цветов, отличного от зелёного не распознаются
 
 
 
# Алгоритм:
- Бинаризировать изображение с целью нахождения дверного проёма (может быть изменено на простое нахождение границ)
- Алгоритмом хафа найти все прямые и учесть только те, которые располагаются почти вертикально (отклонение в пределах 0.1)
- Из отфильтрованных прямых выбрать две ближайшие к центру изображения прямые (ближайшие слева и справа относительно центра)
- Если хотя бы с одной из сторон относительно центра почти вертикальных прямых нет, значит дверной проём отсутствует, либо не распознан.
Расстояние между отрезками принимается за ширину двери
- Бинаризировать изображение с целью нахождения стула (заранее известен диапазон оттенков стула)
- Нахождение ширины стула, как ширины описывающего его бокса.
- Сравнение полученных чисел.